<!DOCTYPE html>
<!--
 Copyright (c) 2021 Hit robot group
  
 This program and the accompanying materials are made available under the
 terms of the Eclipse Public License 2.0 which is available at
 http://www.eclipse.org/legal/epl-2.0.

 SPDX-License-Identifier: EPL-2.0
 
 Contributors:
     Tibalt Zhao
     - initial documentation
-->

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Using MS Visual Studio</title>
	<link rel="stylesheet" type="text/css" href="../help.css">
</head>

<body>
<h1 id="topOfPage">Compiling and Debugging 4diac FORTE with MS Visual Studio Code</h1>
<p>The following describes how to compile 4diac FORTE with win32-architecture using Visual Studio Code. 
In the installation tutorial <a href="../../html/installation/install.html#ownFORTE">(back)</a> you find more details on building your own 4diac FORTE.
Additionally, visual studio code is described there.</p>


<h2>Building a MS Visual Studio Code Project for 4diac FORTE with CMake</h2>
In the <a href="../../html/installation/install.html#ownFORTE">installation tutorial</a>, the steps on building a project with CMake are described in detail.
To use Visual Studio Code with CMake, you need to specify the options (All the options are shown in CMake-GUI when you choose source folder FORTE_FOLDER_ROOT, refer to	<a href="../../html/installation/install.html#generateFilesForCompiling">Build a project with CMake</a>.) for CMake in settings.json for the project in Visual Studio Code.The correct architecture is Win32. Below is an example of settings.json for forte with OPC DA compiled. 
<div class="code">
{
    "cmake.configureOnOpen": false,

   "cmake.configureSettings": {
      "FORTE_ARCHITECTURE:STRING": "Win32",
      //Enable Forte Com FBDK
      "FORTE_COM_FBDK:BOOL": "ON",
      //Enable Forte Com Ethernet
      "FORTE_COM_ETH:BOOL": "ON",
      //Enable Forte local communication
      "FORTE_COM_LOCAL:BOOL": "ON",
      //IEC61131-3 Function blocks
      "FORTE_MODULE_IEC61131:BOOL": "ON",
      "FORTE_MODULE_UTILS:BOOL": "ON",
      "FORTE_MODULE_CONVERT:BOOL": "ON",
      //Loglevel to use
      "FORTE_LOGLEVEL:STRING": "LOGDEBUG",
      "CMAKE_BUILD_TYPE:STRING": "debug",
      "FORTE_COM_OPC":"ON",
      "FORTE_COM_OPC_LIB_ROOT": "D:/4diac/OPC_DA_ClientSDK_0.4/" ,
      "FORTE_COM_OPC_BOOST_ROOT": "D:/4diac/boost_1_70_0/boost_1_70_0/", 
   }
}
</div>


<h2>Compile and debug 4diac FORTE with Visual Studio Code</h2>
<ol>
	<li>Install compiler. For example, msbuild tools if you want to compile OPC DA, install the components according to <a href="../../html/communication/opc.html#msbuildtools">ms buildtools</a>. Or if you prefer mingw-w64, follow <a href="../../html/installation/minGW.html">mingw-w64</a>.</li> 
	<li>Install "CMake tools" plugin in visual studio code.</li>
	<li>Open command palette(ctrl + shift + p), compile or debug in below command:
<div class="code">
cmake:select a kit;    //choose MINGW64, msbuildtools or gcc
cmake:select variant;  //debug or release
cmake:configure;       
cmake:build            //compile
cmake:debug            
</div>
<div><img src="../../html/installation/img/visualcodeCMake.png" alt="CMake command "/></div>
	</li>
	<li> When you choose debug or release, do make the cmake option "CMAKE_BUILD_TYPE" in settings.json align with the "cmake:select variant". 
<div><img src="../../html/installation/img/visualcodeDebug.png" alt="debug or release "/></div>
	</li>
</ol>

<h1 id="whereToGoFromHere">Where to go from here?</h1>

<p>If you want to build a 4diac FORTE, here is a quick link back:</p>

<p><a href="../../html/installation/install.html">Install Eclipse 4diac</a></p>

<p>After you installed all required tools, it's time to start using them. Take a look at the following page:</p>

<p><a href="../../html/4diacIDE/overview.html">Step by step tutorial</a></p>

<p>If you want to go back to the Start Here page, we leave you here a fast access</p>

<p><a href="../../html/startHere/startHere.html">Start Here page</a></p>

<p class="goToTop">Or <a href="#topOfPage">Go to top</a></p>

</body>
</html>
